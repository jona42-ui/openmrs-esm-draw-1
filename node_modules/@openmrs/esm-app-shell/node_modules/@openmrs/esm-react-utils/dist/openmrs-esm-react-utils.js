/*! For license information please see openmrs-esm-react-utils.js.LICENSE.txt */
System.register(["react","@openmrs/esm-config","@openmrs/esm-extensions","@openmrs/esm-globals","react-dom","i18next","react-i18next","@openmrs/esm-api","dayjs"],(function(e,t){var n={},r={},o={},i={},u={},a={},c={},l={},s={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(u,"__esModule",{value:!0}),{setters:[function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){r.getConfigStore=e.getConfigStore,r.getExtensionConfigFromStore=e.getExtensionConfigFromStore,r.getExtensionsConfigStore=e.getExtensionsConfigStore,r.interpolateUrl=e.interpolateUrl,r.navigate=e.navigate},function(e){o.getConnectedExtensions=e.getConnectedExtensions,o.getExtensionInternalStore=e.getExtensionInternalStore,o.getExtensionStore=e.getExtensionStore,o.registerExtensionSlot=e.registerExtensionSlot,o.renderExtension=e.renderExtension},function(e){i.subscribeConnectivityChanged=e.subscribeConnectivityChanged},function(e){Object.keys(e).forEach((function(t){u[t]=e[t]}))},function(e){a.default=e.default},function(e){c.I18nextProvider=e.I18nextProvider},function(e){l.defaultVisitCustomRepresentation=e.defaultVisitCustomRepresentation,l.fetchCurrentPatient=e.fetchCurrentPatient,l.getCurrentUser=e.getCurrentUser,l.getLocations=e.getLocations,l.getSessionStore=e.getSessionStore,l.getVisitTypes=e.getVisitTypes,l.openmrsFetch=e.openmrsFetch,l.userHasAccess=e.userHasAccess},function(e){s.default=e.default}],execute:function(){e((()=>{var e={332:function(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isToday=function(){var e="YYYY-MM-DD",t=n();return this.format(e)===t.format(e)}}}()},645:(e,t,n)=>{"use strict";var r=n(493);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},385:()=>{System.register([],(function(e,t){return{execute:function(){e(function(){"use strict";var e=function(e,t){var n=l[e];if(n)return n.active?console.error("Cannot override an existing store. Make sure that stores are only created once."):n.value.setState(t,!0),n.active=!0,n.value;var r=c()((function(){return t}));return l[e]={value:r,active:!0},r},t=function(e,t){var n=l[e];if(!n){var r=c()((function(){return null!=t?t:{}}));return l[e]={value:r,active:!1},r}return n.value},n=function(t){return e("app",t)},r=function(){return t("app",{})},o=function(e,t,n){var r=t(e.getState());return e.subscribe((function(e){var o=t(e);o!==r&&(r=o,n(o))}))},i={d:function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},u={};i.r(u),i.d(u,{createAppState:function(){return n},createGlobalStore:function(){return e},getAppState:function(){return r},getGlobalStore:function(){return t},subscribeTo:function(){return o}});var a=function(e){var t,n=new Set,r=function(e,r){var o="function"==typeof e?e(t):e;if(!Object.is(o,t)){var i=t;t=(null!=r?r:"object"!=typeof o)?o:Object.assign({},t,o),n.forEach((function(e){return e(t,i)}))}},o=function(){return t},i={setState:r,getState:o,subscribe:function(e){return n.add(e),function(){return n.delete(e)}},destroy:function(){console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,o,i),i},c=function(e){return e?a(e):a},l={};return u}())}}}))},173:(e,t,n)=>{"use strict";var r=n(954),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,u=r.useEffect,a=r.useLayoutEffect,c=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var s="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return a((function(){o.value=n,o.getSnapshot=t,l(o)&&s({inst:o})}),[e,n,t]),u((function(){return l(o)&&s({inst:o}),e((function(){l(o)&&s({inst:o})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:s},374:(e,t,n)=>{"use strict";e.exports=n(173)},766:e=>{"use strict";e.exports=l},824:e=>{"use strict";e.exports=r},45:e=>{"use strict";e.exports=o},728:e=>{"use strict";e.exports=i},688:e=>{"use strict";e.exports=s},64:e=>{"use strict";e.exports=a},954:e=>{"use strict";e.exports=n},493:e=>{"use strict";e.exports=u},281:e=>{"use strict";e.exports=c}},t={};function f(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,f),o.exports}f.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return f.d(t,{a:t}),t},f.d=(e,t)=>{for(var n in t)f.o(t,n)&&!f.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},f.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),f.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var d={};return(()=>{"use strict";f.r(d),f.d(d,{ComponentContext:()=>t,ConfigurableLink:()=>o,Extension:()=>y,ExtensionSlot:()=>Pt,UserHasAccess:()=>Vn,createUseStore:()=>a,getAsyncExtensionLifecycle:()=>on,getAsyncLifecycle:()=>nn,getLifecycle:()=>tn,getSyncLifecycle:()=>rn,isDesktop:()=>kn,openmrsComponentDecorator:()=>en,useAssignedExtensionIds:()=>an,useAssignedExtensions:()=>wt,useBodyScrollLock:()=>cn,useConfig:()=>mn,useConnectedExtensions:()=>Ot,useConnectivity:()=>b,useExtensionInternalStore:()=>_n,useExtensionSlot:()=>jt,useExtensionSlotMeta:()=>Pn,useExtensionStore:()=>An,useForceUpdate:()=>Rn,useLayoutType:()=>Mn,useLocations:()=>Un,useOnClickOutside:()=>Ln,usePagination:()=>Yr,usePatient:()=>xn,useSession:()=>$n,useStore:()=>Kn,useStoreWithActions:()=>Jn,useVisit:()=>$r,useVisitTypes:()=>Gr});var e=f(954),t=e.default.createContext({moduleName:""}),n=f(824);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(t){var o=t.to,i=t.templateParams,u=t.children,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,["to","templateParams","children"]);return e.default.createElement("a",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}({onClick:function(e){return function(e,t,r){e.metaKey||e.ctrlKey||e.shiftKey||0!=e.button||(e.preventDefault(),(0,n.navigate)({to:t,templateParams:r}))}(e,o,i)},href:(0,n.interpolateUrl)(o,i)},a),u)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(t){return function(n){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)(t.getState()),2),o=r[0],a=r[1];(0,e.useEffect)((function(){return t.subscribe((function(e){return a(e)}))}),[]);var c=(0,e.useMemo)((function(){return n?function(e,t){var n=function(n){o[n]=function(){var o=r;e.setState((function(e){for(var r=[e],i=0;i<o.length;i++)r.push(o[i]);return t[n](r)}))}},r=arguments;"function"==typeof t&&(t=t(e));var o={};for(var i in t)n(i);return o}(t,n):{}}),[n]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}({},o,c)}}var c=f(45);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}var y=function(n){var r=n.state,o=n.children,i=n.wrap,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,["state","children","wrap"]),a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)(),2),s=a[0],f=a[1],d=(0,e.useContext)(t).extension,y=(0,e.useRef)(null),m=(0,e.useRef)(),v=(0,e.useRef)(!1);(0,e.useEffect)((function(){i&&console.warn("'wrap' prop of Extension is being used ".concat((null==d?void 0:d.extensionId)?"by ".concat(d.extensionId," in ").concat(d.extensionSlotName):"",". This will be removed in a future release."))}),[]);var b=(0,e.useCallback)((function(e){f(e)}),[f]);(0,e.useEffect)((function(){if(null!=s&&(null==d?void 0:d.extensionSlotName)&&d.extensionSlotModuleName&&d.extensionSlotModuleName&&!y.current&&!v.current)return v.current=!0,(0,c.renderExtension)(s,d.extensionSlotName,d.extensionSlotModuleName,d.extensionId,void 0,r).then((function(e){y.current=e,v.current=!1})),function(){if(y&&y.current){var e=y.current.getStatus();switch(console.log("Unmounting ".concat(y.current,"; status: ").concat(e)),e){case"MOUNTING":y.current.mountPromise.then(y.current.unmount);break;case"MOUNTED":y.current.unmount();break;case"UPDATING":m.current&&m.current.then((function(){y.current&&"MOUNTED"===y.current.getStatus()&&y.current.unmount()}))}}}}),[null==d?void 0:d.extensionSlotName,null==d?void 0:d.extensionId,null==d?void 0:d.extensionSlotModuleName,s]),(0,e.useEffect)((function(){return y.current&&y.current.update&&Promise.all([y.current.mountPromise,m.current]).then((function(){var e;(null==y||null===(e=y.current)||void 0===e?void 0:e.update)&&(m.current=y.current.update(p({},r)))})),function(){Promise.resolve(m.current).then((function(){m.current=void 0}))}}),[r]);var h=e.default.createElement("div",p({ref:b,"data-extension-id":null==d?void 0:d.extensionId,style:{position:"relative"}},u));return"function"!=typeof o||e.default.isValidElement(o)?d&&i?i(h,d):h:e.default.createElement(e.default.Fragment,null,o(h,d))},m=f(728);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)(window.navigator.onLine),2),n=t[0],r=t[1];return(0,e.useEffect)((function(){return(0,m.subscribeConnectivityChanged)((function(e){var t=e.online;return r(t)}))}),[]),n}const h=function(e,t){return e===t||e!=e&&t!=t},g=function(e,t){for(var n=e.length;n--;)if(h(e[n][0],t))return n;return-1};var S=Array.prototype.splice;function w(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}w.prototype.clear=function(){this.__data__=[],this.size=0},w.prototype.delete=function(e){var t=this.__data__,n=g(t,e);return!(n<0||(n==t.length-1?t.pop():S.call(t,n,1),--this.size,0))},w.prototype.get=function(e){var t=this.__data__,n=g(t,e);return n<0?void 0:t[n][1]},w.prototype.has=function(e){return g(this.__data__,e)>-1},w.prototype.set=function(e,t){var n=this.__data__,r=g(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const O=w,j="object"==typeof global&&global&&global.Object===Object&&global;var E="object"==typeof self&&self&&self.Object===Object&&self;const x=j||E||Function("return this")(),_=x.Symbol;var P=Object.prototype,A=P.hasOwnProperty,C=P.toString,R=_?_.toStringTag:void 0;var I=Object.prototype.toString;var T=_?_.toStringTag:void 0;const M=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":T&&T in Object(e)?function(e){var t=A.call(e,R),n=e[R];try{e[R]=void 0;var r=!0}catch(e){}var o=C.call(e);return r&&(t?e[R]=n:delete e[R]),o}(e):function(e){return I.call(e)}(e)},k=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},D=function(e){if(!k(e))return!1;var t=M(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},U=x["__core-js_shared__"];var L,N=(L=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"";var B=Function.prototype.toString;const F=function(e){if(null!=e){try{return B.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var V=/^\[object .+?Constructor\]$/,z=Function.prototype,$=Object.prototype,W=z.toString,G=$.hasOwnProperty,q=RegExp("^"+W.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const H=function(e){return!(!k(e)||(t=e,N&&N in t))&&(D(e)?q:V).test(F(e));var t},Y=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return H(n)?n:void 0},K=Y(x,"Map"),J=Y(Object,"create");var Z=Object.prototype.hasOwnProperty;var Q=Object.prototype.hasOwnProperty;function X(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}X.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},X.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},X.prototype.get=function(e){var t=this.__data__;if(J){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Z.call(t,e)?t[e]:void 0},X.prototype.has=function(e){var t=this.__data__;return J?void 0!==t[e]:Q.call(t,e)},X.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=J&&void 0===t?"__lodash_hash_undefined__":t,this};const ee=X,te=function(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map};function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ne.prototype.clear=function(){this.size=0,this.__data__={hash:new ee,map:new(K||O),string:new ee}},ne.prototype.delete=function(e){var t=te(this,e).delete(e);return this.size-=t?1:0,t},ne.prototype.get=function(e){return te(this,e).get(e)},ne.prototype.has=function(e){return te(this,e).has(e)},ne.prototype.set=function(e,t){var n=te(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const re=ne;function oe(e){var t=this.__data__=new O(e);this.size=t.size}oe.prototype.clear=function(){this.__data__=new O,this.size=0},oe.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},oe.prototype.get=function(e){return this.__data__.get(e)},oe.prototype.has=function(e){return this.__data__.has(e)},oe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof O){var r=n.__data__;if(!K||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new re(r)}return n.set(e,t),this.size=n.size,this};const ie=oe;function ue(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new re;++t<n;)this.add(e[t])}ue.prototype.add=ue.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ue.prototype.has=function(e){return this.__data__.has(e)};const ae=ue,ce=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},le=function(e,t){return e.has(t)},se=function(e,t,n,r,o,i){var u=1&n,a=e.length,c=t.length;if(a!=c&&!(u&&c>a))return!1;var l=i.get(e),s=i.get(t);if(l&&s)return l==t&&s==e;var f=-1,d=!0,p=2&n?new ae:void 0;for(i.set(e,t),i.set(t,e);++f<a;){var y=e[f],m=t[f];if(r)var v=u?r(m,y,f,t,e,i):r(y,m,f,e,t,i);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!ce(t,(function(e,t){if(!le(p,t)&&(y===e||o(y,e,n,r,i)))return p.push(t)}))){d=!1;break}}else if(y!==m&&!o(y,m,n,r,i)){d=!1;break}}return i.delete(e),i.delete(t),d},fe=x.Uint8Array,de=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},pe=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var ye=_?_.prototype:void 0,me=ye?ye.valueOf:void 0;const ve=Array.isArray;var be=Object.prototype.propertyIsEnumerable,he=Object.getOwnPropertySymbols;const ge=he?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var u=e[n];t(u,n,e)&&(i[o++]=u)}return i}(he(e),(function(t){return be.call(e,t)})))}:function(){return[]},Se=function(e){return null!=e&&"object"==typeof e},we=function(e){return Se(e)&&"[object Arguments]"==M(e)};var Oe=Object.prototype,je=Oe.hasOwnProperty,Ee=Oe.propertyIsEnumerable,xe=we(function(){return arguments}())?we:function(e){return Se(e)&&je.call(e,"callee")&&!Ee.call(e,"callee")};const _e=xe;var Pe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ae=Pe&&"object"==typeof module&&module&&!module.nodeType&&module,Ce=Ae&&Ae.exports===Pe?x.Buffer:void 0;const Re=(Ce?Ce.isBuffer:void 0)||function(){return!1};var Ie=/^(?:0|[1-9]\d*)$/;const Te=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Ie.test(e))&&e>-1&&e%1==0&&e<t},Me=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var ke={};ke["[object Float32Array]"]=ke["[object Float64Array]"]=ke["[object Int8Array]"]=ke["[object Int16Array]"]=ke["[object Int32Array]"]=ke["[object Uint8Array]"]=ke["[object Uint8ClampedArray]"]=ke["[object Uint16Array]"]=ke["[object Uint32Array]"]=!0,ke["[object Arguments]"]=ke["[object Array]"]=ke["[object ArrayBuffer]"]=ke["[object Boolean]"]=ke["[object DataView]"]=ke["[object Date]"]=ke["[object Error]"]=ke["[object Function]"]=ke["[object Map]"]=ke["[object Number]"]=ke["[object Object]"]=ke["[object RegExp]"]=ke["[object Set]"]=ke["[object String]"]=ke["[object WeakMap]"]=!1;var De="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ue=De&&"object"==typeof module&&module&&!module.nodeType&&module,Le=Ue&&Ue.exports===De&&j.process,Ne=function(){try{return Ue&&Ue.require&&Ue.require("util").types||Le&&Le.binding&&Le.binding("util")}catch(e){}}(),Be=Ne&&Ne.isTypedArray;const Fe=Be?(Ve=Be,function(e){return Ve(e)}):function(e){return Se(e)&&Me(e.length)&&!!ke[M(e)]};var Ve,ze=Object.prototype.hasOwnProperty;const $e=function(e,t){var n=ve(e),r=!n&&_e(e),o=!n&&!r&&Re(e),i=!n&&!r&&!o&&Fe(e),u=n||r||o||i,a=u?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var l in e)!t&&!ze.call(e,l)||u&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Te(l,c))||a.push(l);return a};var We=Object.prototype;const Ge=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object);var qe=Object.prototype.hasOwnProperty;const He=function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||We))return Ge(e);var t,n,r=[];for(var o in Object(e))qe.call(e,o)&&"constructor"!=o&&r.push(o);return r},Ye=function(e){return null!=(t=e)&&Me(t.length)&&!D(t)?$e(e):He(e);var t},Ke=function(e){return function(e,t,n){var r=t(e);return ve(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Ye,ge)};var Je=Object.prototype.hasOwnProperty;const Ze=Y(x,"DataView"),Qe=Y(x,"Promise"),Xe=Y(x,"Set"),et=Y(x,"WeakMap");var tt="[object Map]",nt="[object Promise]",rt="[object Set]",ot="[object WeakMap]",it="[object DataView]",ut=F(Ze),at=F(K),ct=F(Qe),lt=F(Xe),st=F(et),ft=M;(Ze&&ft(new Ze(new ArrayBuffer(1)))!=it||K&&ft(new K)!=tt||Qe&&ft(Qe.resolve())!=nt||Xe&&ft(new Xe)!=rt||et&&ft(new et)!=ot)&&(ft=function(e){var t=M(e),n="[object Object]"==t?e.constructor:void 0,r=n?F(n):"";if(r)switch(r){case ut:return it;case at:return tt;case ct:return nt;case lt:return rt;case st:return ot}return t});const dt=ft;var pt="[object Arguments]",yt="[object Array]",mt="[object Object]",vt=Object.prototype.hasOwnProperty;const bt=function(e,t,n,r,o,i){var u=ve(e),a=ve(t),c=u?yt:dt(e),l=a?yt:dt(t),s=(c=c==pt?mt:c)==mt,f=(l=l==pt?mt:l)==mt,d=c==l;if(d&&Re(e)){if(!Re(t))return!1;u=!0,s=!1}if(d&&!s)return i||(i=new ie),u||Fe(e)?se(e,t,n,r,o,i):function(e,t,n,r,o,i,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new fe(e),new fe(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=de;case"[object Set]":var c=1&r;if(a||(a=pe),e.size!=t.size&&!c)return!1;var l=u.get(e);if(l)return l==t;r|=2,u.set(e,t);var s=se(a(e),a(t),r,o,i,u);return u.delete(e),s;case"[object Symbol]":if(me)return me.call(e)==me.call(t)}return!1}(e,t,c,n,r,o,i);if(!(1&n)){var p=s&&vt.call(e,"__wrapped__"),y=f&&vt.call(t,"__wrapped__");if(p||y){var m=p?e.value():e,v=y?t.value():t;return i||(i=new ie),o(m,v,n,r,i)}}return!!d&&(i||(i=new ie),function(e,t,n,r,o,i){var u=1&n,a=Ke(e),c=a.length;if(c!=Ke(t).length&&!u)return!1;for(var l=c;l--;){var s=a[l];if(!(u?s in t:Je.call(t,s)))return!1}var f=i.get(e),d=i.get(t);if(f&&d)return f==t&&d==e;var p=!0;i.set(e,t),i.set(t,e);for(var y=u;++l<c;){var m=e[s=a[l]],v=t[s];if(r)var b=u?r(v,m,s,t,e,i):r(m,v,s,e,t,i);if(!(void 0===b?m===v||o(m,v,n,r,i):b)){p=!1;break}y||(y="constructor"==s)}if(p&&!y){var h=e.constructor,g=t.constructor;h==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof h&&h instanceof h&&"function"==typeof g&&g instanceof g||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,r,o,i))},ht=function e(t,n,r,o,i){return t===n||(null==t||null==n||!Se(t)&&!Se(n)?t!=t&&n!=n:bt(t,n,r,o,e,i))},gt=function(e,t){return ht(e,t)};function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wt(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)([]),2),r=n[0],o=n[1];return(0,e.useEffect)((function(){var e=function(e){var n,i,u=null!==(i=null===(n=e.slots[t])||void 0===n?void 0:n.assignedExtensions)&&void 0!==i?i:[];gt(u,r)||o(u)};return e((0,c.getExtensionStore)().getState()),(0,c.getExtensionStore)().subscribe(e)}),[t,r]),r}function Ot(t){var n=b(),r=wt(t);return(0,e.useMemo)((function(){return(0,c.getConnectedExtensions)(r,n)}),[r,n])}function jt(n){var r=(0,e.useContext)(t).moduleName;if(!r)throw Error("ComponentContext has not been provided. This should come from @openmrs/esm-react-utils.");return(0,e.useEffect)((function(){(0,c.registerExtensionSlot)(r,n)}),[]),{extensions:Ot(n),extensionSlotName:n,extensionSlotModuleName:r}}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Et(e,t,n[t])}))}return e}function _t(e){return e}function Pt(n){var r=n.name,o=n.extensionSlotName,i=n.select,u=void 0===i?_t:i,a=n.children,c=n.state,l=n.style,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,["name","extensionSlotName","select","children","state","style"]);if(a&&c)throw new Error("Both children and state have been provided. If children are provided, the state must be passed as a prop to the `Extension` component.");var f,d,p,m,v=null!=r?r:o,b=(0,e.useRef)(null),h=jt(v),g=h.extensions,S=h.extensionSlotModuleName,w=(0,e.useMemo)((function(){return u(g)}),[u,g]),O=(0,e.useMemo)((function(){if("function"==typeof a&&!e.default.isValidElement(a))return w.map((function(e){return a(e)}))}),[a,w]);return e.default.createElement("div",xt({ref:b,"data-extension-slot-name":v,"data-extension-slot-module-name":S,style:(p=xt({},l),m={position:"relative"},m=null!=m?m:{},Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(m)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(m)).forEach((function(e){Object.defineProperty(p,e,Object.getOwnPropertyDescriptor(m,e))})),p)},s),v&&w.map((function(n,r){return e.default.createElement(t.Provider,{key:n.id,value:{moduleName:S,extension:{extensionId:n.id,extensionSlotName:v,extensionSlotModuleName:S}}},null!==(d=null!==(f=null==O?void 0:O[r])&&void 0!==f?f:"function"!=typeof a?a:null)&&void 0!==d?d:e.default.createElement(y,{state:c}))})))}var At=f(645);function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){Tt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){var n;if("function"!=typeof(n=t.domElement?function(){return t.domElement}:t.domElementGetter?t.domElementGetter:e.domElementGetter?e.domElementGetter:function(e){var t=e.appName||e.name;if(!t)throw Error("single-spa's dom-element-getter-helpers was not given an application name as a prop, so it can't make a unique dom element container for the react application");var n="single-spa-application:".concat(t);return function(){var e=document.getElementById(n);return e||((e=document.createElement("div")).id=n,document.body.appendChild(e)),e}}(t)))throw Error("single-spa's dom-element-getter-helpers was given an invalid domElementGetter for application or parcel '".concat(t.name,"'. Expected a function, received ").concat(Mt(n)));return function(){var e=n(t);if(!(e instanceof HTMLElement))throw Error("single-spa's dom-element-getter-helpers: domElementGetter returned an invalid dom element for application or parcel '".concat(t.name,"'. Expected HTMLElement, received ").concat(Mt(e)));return e}}var Dt=null;try{Dt=require("react").createContext()}catch(Ct){}var Ut={React:null,ReactDOM:null,ReactDOMClient:null,rootComponent:null,loadRootComponent:null,renderType:"createRoot",errorBoundary:null,errorBoundaryClass:null,domElementGetter:null,parcelCanUpdate:!0,suppressComponentDidCatchWarning:!1,domElements:{},renderResults:{},updateResolves:{},unmountResolves:{}};function Lt(e){if("object"!==It(e))throw new Error("single-spa-react requires a configuration object");var t=Rt(Rt({},Ut),e);if(!t.React)throw new Error("single-spa-react must be passed opts.React");if(!t.ReactDOM&&!t.ReactDOMClient)throw new Error("single-spa-react must be passed opts.ReactDOM or opts.ReactDOMClient");if(!t.rootComponent&&!t.loadRootComponent)throw new Error("single-spa-react must be passed opts.rootComponent or opts.loadRootComponent");if(t.errorBoundary&&"function"!=typeof t.errorBoundary)throw Error("The errorBoundary opt for single-spa-react must either be omitted or be a function that returns React elements");!Dt&&t.React.createContext&&(Dt=t.React.createContext()),t.SingleSpaRoot=function(e){function t(e){t.displayName="SingleSpaRoot(".concat(e.name,")")}return t.prototype=Object.create(e.React.Component.prototype),t.prototype.componentDidMount=function(){setTimeout(this.props.mountFinished)},t.prototype.componentWillUnmount=function(){setTimeout(this.props.unmountFinished)},t.prototype.render=function(){return setTimeout(this.props.updateFinished),this.props.children},t}(t);var n={bootstrap:Nt.bind(null,t),mount:Bt.bind(null,t),unmount:Ft.bind(null,t)};return t.parcelCanUpdate&&(n.update=Vt.bind(null,t)),n}function Nt(e,t){return e.rootComponent?Promise.resolve():e.loadRootComponent(t).then((function(t){e.rootComponent=t}))}function Bt(e,t){return new Promise((function(n,r){e.suppressComponentDidCatchWarning||!function(e){if(!(e&&"string"==typeof e.version&&e.version.indexOf(".")>=0))return!1;var t=e.version.slice(0,e.version.indexOf("."));try{return Number(t)>=16}catch(e){return!1}}(e.React)||e.errorBoundary||e.errorBoundaryClass||(e.rootComponent.prototype?e.rootComponent.prototype.componentDidCatch||console.warn("single-spa-react: ".concat(t.name||t.appName||t.childAppName,"'s rootComponent should implement componentDidCatch to avoid accidentally unmounting the entire single-spa application.")):console.warn("single-spa-react: ".concat(t.name||t.appName||t.childAppName,"'s rootComponent does not implement an error boundary.  If using a functional component, consider providing an opts.errorBoundary to singleSpaReact(opts).")));var o=Wt(e,t,(function(){n(this)})),i=kt(e,t)(),u=function(e){var t=e.renderType,n=e.elementToRender,r=e.domElement,o=e.reactDom[t];if("function"!=typeof o)throw new Error('renderType "'.concat(t,'" did not return a function.'));switch(t){case"createRoot":case"unstable_createRoot":case"createBlockingRoot":case"unstable_createBlockingRoot":var i=o(r);return i.render(n),i;case"hydrateRoot":return o(r,n);default:return o(n,r),null}}({elementToRender:o,domElement:i,reactDom:zt(e),renderType:$t(e)});e.domElements[t.name]=i,e.renderResults[t.name]=u}))}function Ft(e,t){return new Promise((function(n){e.unmountResolves[t.name]=n;var r=e.renderResults[t.name];r&&r.unmount?r.unmount():zt(e).unmountComponentAtNode(e.domElements[t.name]),delete e.domElements[t.name],delete e.renderResults[t.name]}))}function Vt(e,t){return new Promise((function(n){e.updateResolves[t.name]||(e.updateResolves[t.name]=[]),e.updateResolves[t.name].push(n);var r=Wt(e,t,null),o=e.renderResults[t.name];if(o&&o.render)o.render(r);else{var i=kt(e,t)();zt(e).render(r,i)}}))}function zt(e){return e.ReactDOMClient||e.ReactDOM}function $t(e){return"function"==typeof e.renderType?e.renderType():e.renderType}function Wt(e,t,n){var r=e.React.createElement(e.rootComponent,t),o=Dt?e.React.createElement(Dt.Provider,{value:t},r):r;return(e.errorBoundary||t.errorBoundary||e.errorBoundaryClass||t.errorBoundaryClass)&&(e.errorBoundaryClass=e.errorBoundaryClass||t.errorBoundaryClass||function(e,t){function n(t){e.React.Component.apply(this,arguments),this.state={caughtError:null,caughtErrorInfo:null},n.displayName="SingleSpaReactErrorBoundary(".concat(t.name,")")}return n.prototype=Object.create(e.React.Component.prototype),n.prototype.render=function(){return this.state.caughtError?(e.errorBoundary||t.errorBoundary)(this.state.caughtError,this.state.caughtErrorInfo,this.props):this.props.children},n.prototype.componentDidCatch=function(e,t){this.setState({caughtError:e,caughtErrorInfo:t})},n}(e,t),o=e.React.createElement(e.errorBoundaryClass,t,o)),e.React.createElement(e.SingleSpaRoot,Rt(Rt({},t),{},{mountFinished:n,updateFinished:function(){e.updateResolves[t.name]&&(e.updateResolves[t.name].forEach((function(e){return e()})),delete e.updateResolves[t.name])},unmountFinished:function(){e.unmountResolves[t.name]&&(e.unmountResolves[t.name](),delete e.unmountResolves[t.name])}}),o)}var Gt=f(64),qt=f(281);function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e){return Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Yt(e)}function Kt(e,t){return Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kt(e,t)}function Jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yt(e);if(t){var o=Yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}(this,n)}}var Zt=Gt.default.default||Gt.default,Qt={strictMode:!0,throwErrorsToConsole:!0,disableTranslations:!1},Xt=function(t){(0,e.useEffect)((function(){return Zt.on("languageChanged",t.forceUpdate),function(){return Zt.off("languageChanged",t.forceUpdate)}}),[t.forceUpdate]);var n=(0,e.useRef)(null);if(n.current)throw n.current;if(!Zt.hasLoadedNamespace(t.ns)){var r=setTimeout((function(){console.warn("openmrsComponentDecorator: the React suspense promise for i18next.loadNamespaces(['".concat(t.ns,"']) did not resolve nor reject after three seconds. This could mean you have multiple versions of i18next and haven't made i18next a webpack external in all projects."))}),3e3);throw Zt.loadNamespaces([t.ns]).then((function(){return clearTimeout(r)})).catch((function(e){clearTimeout(r),n.current=e}))}return e.default.createElement(e.default.Fragment,null,t.children)};function en(n){if("object"!=typeof n||"string"!=typeof n.featureName||"string"!=typeof n.moduleName)throw new Error("Invalid options");var r=Object.assign({},Qt,n);return function(n){var o,i,u,a;return i=o=function(o){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(c,o);var i,u,a=Jt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={caughtError:null,caughtErrorInfo:null,config:{moduleName:r.moduleName,extension:e._extensionContext}},t}return i=c,(u=[{key:"componentDidCatch",value:function(e,t){t&&t.componentStack&&(e.extra=Object.assign(e.extra||{},{componentStack:t.componentStack})),r.throwErrorsToConsole&&setTimeout((function(){throw e})),this.setState({caughtError:e,caughtErrorInfo:t})}},{key:"render",value:function(){var o=this;if(this.state.caughtError)return e.default.createElement("div",null,"An error has occurred. Please try reloading the page.");var i=e.default.createElement(t.Provider,{value:this.state.config},e.default.createElement(e.default.Suspense,{fallback:null},r.disableTranslations?e.default.createElement(n,this.props):e.default.createElement(Xt,{ns:r.moduleName,forceUpdate:function(){return o.forceUpdate()}},e.default.createElement(qt.I18nextProvider,{i18n:Zt,defaultNS:r.moduleName},e.default.createElement(n,this.props)))));return r.strictMode||!e.default.StrictMode?i:e.default.createElement(e.default.StrictMode,null,i)}}])&&Ht(i.prototype,u),c}(e.default.Component),u="displayName",a="OpenmrsReactComponent(".concat(r.featureName,")"),u in i?Object.defineProperty(i,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[u]=a,o}}function tn(t,n){return Lt({React:e.default,ReactDOMClient:At,rootComponent:en(n)(t)})}function nn(e,t){return function(){return e().then((function(e){return tn(e.default,t)}))}}function rn(e,t){return function(){return Promise.resolve(tn(e,t))}}var on=nn;function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function an(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?un(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)([]),2),r=n[0],o=n[1];return(0,e.useEffect)((function(){return(0,c.getExtensionStore)().subscribe((function(e){var n,i,u=null!==(i=null===(n=e.slots[t])||void 0===n?void 0:n.assignedExtensions.map((function(e){return e.id})))&&void 0!==i?i:[];gt(u,r)||o(u)}))}),[]),r}function cn(t){(0,e.useEffect)((function(){if(t){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=e}}}),[t])}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dn={},pn='No ComponentContext has been provided. This should come from "openmrsComponentDecorator".\nUsually this is already applied when using "getAsyncLifecycle" or "getSyncLifecycle".';function yn(t){var r=(0,e.useMemo)(n.getExtensionsConfigStore,[]),o=function(t,r){var o=fn((0,e.useState)(function(e,t){return t?function(){var r=e.getState(),o=(0,n.getExtensionConfigFromStore)(r,t.extensionSlotName,t.extensionId);if(o.loaded&&o.config)return o.config}:null}(t,r)),2),i=o[0],u=o[1];return(0,e.useEffect)((function(){if(r)return t.subscribe((function(e){var t=(0,n.getExtensionConfigFromStore)(e,r.extensionSlotName,r.extensionId);t.loaded&&t.config&&!gt(t.config,i)&&u(t.config)}))}),[t,r,i]),i}(r,t);if(!o&&t){var i="".concat(t.extensionSlotName,"-").concat(t.extensionId);throw!dn[i]&&r&&(dn[i]=function(e,t){return new Promise((function(r){var o=e.subscribe((function(e){var i=(0,n.getExtensionConfigFromStore)(e,t.extensionSlotName,t.extensionId);i.loaded&&i.config&&(r(i.config),o())}))}))}(r,t)),dn[i]}return o||{}}function mn(){var r=(0,e.useContext)(t),o=r.moduleName,i=r.extension;if(!o&&!i)throw Error(pn);var u=function(t){var r=(0,e.useMemo)((function(){return(0,n.getConfigStore)(t)}),[t]),o=t,i=function(t){var n=fn((0,e.useState)(function(e){return function(){var t=e.getState();return t.loaded&&t.config?t.config:null}}(t)),2),r=n[0],o=n[1];return(0,e.useEffect)((function(){return null==t?void 0:t.subscribe((function(e){e.loaded&&e.config&&o(e.config)}))}),[t]),r}(r);if(!i)throw dn[o]||(dn[o]=function(e){return new Promise((function(t){var n=e.subscribe((function(e){e.loaded&&e.config&&(t(e.config),n())}))}))}(r)),dn[o];return i}(o),a=yn(i),c=(0,e.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){sn(e,t,n[t])}))}return e}({},u,a)}),[u,a]);return c}var vn,bn=f(766);function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gn(e,t,n[t])}))}return e}function wn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}!function(e){e.loadPatient="loadPatient",e.newPatient="newPatient",e.loadError="patientLoadError"}(vn||(vn={}));var On={patientUuid:null,patient:null,isPendingUuid:!0,isLoadingPatient:!1,err:null};function jn(){var e=/\/patient\/([a-zA-Z0-9\-]+)\/?/.exec(location.pathname);return e&&e[1]}function En(e,t){switch(t.type){case vn.loadPatient:return wn(Sn({},e),{patientUuid:t.patientUuid,patient:null,isPendingUuid:!1,isLoadingPatient:!0,err:null});case vn.newPatient:return wn(Sn({},e),{patient:t.patient,isPendingUuid:!1,isLoadingPatient:!1,err:null});case vn.loadError:return wn(Sn({},e),{patient:null,isPendingUuid:!1,isLoadingPatient:!1,err:t.err});default:return e}}function xn(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useReducer)(En,wn(Sn({},On),{patientUuid:null!=t?t:null,isPendingUuid:!t,isLoadingPatient:!!t})),2),r=n[0],o=n[1];return(0,e.useEffect)((function(){if(r.isPendingUuid){var e=jn();o(e?{type:vn.loadPatient,patientUuid:e}:{type:vn.newPatient,patient:null})}var t=!0;return r.isLoadingPatient&&r.patientUuid&&(0,bn.fetchCurrentPatient)(r.patientUuid).then((function(e){return t&&o({patient:e,type:vn.newPatient})}),(function(e){return t&&o({err:e,type:vn.loadError})})),function(){t=!1}}),[r.isPendingUuid,r.isLoadingPatient,r.patientUuid]),(0,e.useEffect)((function(){var e=function(e){var t=jn();t!=r.patientUuid&&o({type:vn.loadPatient,patientUuid:t})};return window.addEventListener("single-spa:routing-event",e),function(){return window.removeEventListener("single-spa:routing-event",e)}}),[r.patientUuid]),{isLoading:r.isPendingUuid||r.isLoadingPatient,patient:r.patient,patientUuid:null!=t?t:r.patientUuid,error:r.err}}var _n=a((0,c.getExtensionInternalStore)());function Pn(t){var n=Ot(t);return(0,e.useMemo)((function(){return Object.fromEntries(n.map((function(e){return[e.name,e.meta]})))}),[n])}var An=a((0,c.getExtensionStore)());function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rn(){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)(0),2)[1];return(0,e.useCallback)((function(){t((function(e){return e+1}))}),[])}function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tn(){var e="tablet";return document.body.classList.forEach((function(t){switch(t){case"omrs-breakpoint-lt-tablet":e="phone";break;case"omrs-breakpoint-gt-small-desktop":e="large-desktop";break;case"omrs-breakpoint-gt-tablet":e="small-desktop"}})),e}function Mn(){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return In(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)(Tn),2),n=t[0],r=t[1];return(0,e.useEffect)((function(){var e=function(){r(Tn())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}var kn=function(e){return"small-desktop"===e||"large-desktop"===e};function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Un(){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)([]),2),n=t[0],r=t[1];return(0,e.useEffect)((function(){var e=(0,bn.getLocations)().subscribe((function(e){r(e)}),(function(e){console.error(e)}));return function(){return e.unsubscribe()}}),[]),n}function Ln(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(0,e.useRef)(null);return(0,e.useEffect)((function(){if(n){var e=function(e){var n;(null==r||null===(n=r.current)||void 0===n?void 0:n.contains(e.target))||t(e)};return window.addEventListener("click",e),function(){return window.removeEventListener("click",e)}}}),[t,n]),r}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bn,Fn,Vn=function(t){var n=t.privilege,r=t.fallback,o=t.children,i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)(null),2),u=i[0],a=i[1];return(0,e.useEffect)((function(){var e=(0,bn.getCurrentUser)({includeAuthStatus:!1}).subscribe(a);return function(){return e.unsubscribe()}}),[]),u&&(0,bn.userHasAccess)(n,u)?e.default.createElement(e.default.Fragment,null,o):r?e.default.createElement(e.default.Fragment,null,r):null};function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $n(){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)(null),2),n=t[0],r=t[1],o=null;if(!n){if(Bn){var i=(0,bn.getSessionStore)().getState();i.loaded&&(o=i.session)}else Bn=new Promise((function(e){var t=function(t){var n=t.loaded,r=t.session;n&&(e(r),o=r,Fn&&Fn(),Fn=void 0)};t((0,bn.getSessionStore)().getState()),o||(Fn=(0,bn.getSessionStore)().subscribe(t))}));if(!o)throw Bn;r(o)}(0,e.useEffect)((function(){return Fn||(Fn=(0,bn.getSessionStore)().subscribe((function(e){var t=e.loaded,n=e.session;t&&(o=n,r(n))}))),function(){Fn&&Fn(),Fn=void 0}}),[]);var u=n||o;if(!u)throw Bn?(console.warn("useSession is in an unexpected state. Attempting to recover."),Bn):Error("useSession is in an invalid state.");return u}var Wn=f(385);function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hn(e,t){if(e){if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gn(e,t):void 0}}var Yn=function(e){return e};function Kn(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yn,r=arguments.length>2?arguments[2]:void 0,o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||Hn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)((function(){return n(t.getState())})),2),i=o[0],u=o[1];(0,e.useEffect)((function(){return(0,Wn.subscribeTo)(t,n,u)}),[t,n]);var a=(0,e.useMemo)((function(){return r?function(e,t){var n=function(n){o[n]=function(){var o=r;e.setState((function(e){for(var r,i=[e],u=0;u<o.length;u++)i.push(o[u]);return(r=t)[n].apply(r,function(e){if(Array.isArray(e))return Gn(e)}(a=i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||Hn(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var a}))}},r=arguments;"function"==typeof t&&(t=t(e));var o={};for(var i in t)n(i);return o}(t,r):{}}),[t,r]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qn(e,t,n[t])}))}return e}({},i,a)}function Jn(e,t){return Kn(e,Yn,t)}var Zn=f(374);const Qn=new WeakMap,Xn={},er=()=>{},tr=er(),nr=Object,rr=e=>e===tr,or=e=>"function"==typeof e,ir=(e,t)=>({...e,...t}),ur="undefined",ar=typeof window!=ur,cr=typeof document!=ur,lr=(e,t)=>{const n=Qn.get(e);return[()=>e.get(t)||Xn,r=>{const o=e.get(t);n[5](t,ir(o,r),o||Xn)},n[6]]},sr=new WeakMap;let fr=0;const dr=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,i;if(nr(e)!==e||r||n==RegExp)o=r?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=sr.get(e),o)return o;if(o=++fr+"~",sr.set(e,o),n==Array){for(o="@",i=0;i<e.length;i++)o+=dr(e[i])+",";sr.set(e,o)}if(n==nr){o="#";const t=nr.keys(e).sort();for(;!rr(i=t.pop());)rr(e[i])||(o+=i+":"+dr(e[i])+",");sr.set(e,o)}}return o};let pr=!0;const[yr,mr]=ar&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[er,er],vr={isOnline:()=>pr,isVisible:()=>{const e=cr&&document.visibilityState;return rr(e)||"hidden"!==e}},br={initFocus:e=>(cr&&document.addEventListener("visibilitychange",e),yr("focus",e),()=>{cr&&document.removeEventListener("visibilitychange",e),mr("focus",e)}),initReconnect:e=>{const t=()=>{pr=!0,e()},n=()=>{pr=!1};return yr("online",t),yr("offline",n),()=>{mr("online",t),mr("offline",n)}}},hr=!e.default.useId,gr=!ar||"Deno"in window,Sr=gr?e.useEffect:e.useLayoutEffect,wr="undefined"!=typeof navigator&&navigator.connection,Or=!gr&&wr&&(["slow-2g","2g"].includes(wr.effectiveType)||wr.saveData),jr=e=>{if(or(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?dr(e):"",t]};let Er=0;const xr=()=>++Er;async function _r(...e){const[t,n,r,o]=e,i=ir({populateCache:!0,throwOnError:!0},"boolean"==typeof o?{revalidate:o}:o||{});let u=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=!1!==i.revalidate,s=i.throwOnError;if(or(n)){const e=n,r=[],o=t.keys();for(let n=o.next();!n.done;n=o.next()){const o=n.value;!o.startsWith("$inf$")&&e(t.get(o)._k)&&r.push(o)}return Promise.all(r.map(f))}return f(n);async function f(n){const[o]=jr(n);if(!o)return;const[i,f]=lr(t,o),[d,p,y]=Qn.get(t),m=d[o],v=()=>l&&(delete y[o],m&&m[0])?m[0](2).then((()=>i().data)):i().data;if(e.length<3)return v();let b,h=r;const g=xr();p[o]=[g,0];const S=!rr(c),w=i(),O=w.data,j=w._c,E=rr(j)?O:j;if(S&&(c=or(c)?c(E):c,f({data:c,_c:E})),or(h))try{h=h(E)}catch(e){b=e}if(h&&or(h.then)){if(h=await h.catch((e=>{b=e})),g!==p[o][0]){if(b)throw b;return h}b&&S&&(e=>"function"==typeof a?a(e):!1!==a)(b)&&(u=!0,h=E,f({data:h,_c:tr}))}u&&(b||(or(u)&&(h=u(h,E)),f({data:h,_c:tr}))),p[o][1]=xr();const x=await v();if(f({_c:tr}),!b)return u?x:h;if(s)throw b}}const Pr=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Ar=(e,t)=>{if(!Qn.has(e)){const n=ir(br,t),r={},o=_r.bind(tr,e);let i=er;const u={},a=(e,t)=>{const n=u[e]||[];return u[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},c=(t,n,r)=>{e.set(t,n);const o=u[t];if(o)for(let e=o.length;e--;)o[e](r,n)},l=()=>{if(!Qn.has(e)&&(Qn.set(e,[r,{},{},{},o,c,a]),!gr)){const t=n.initFocus(setTimeout.bind(tr,Pr.bind(tr,r,0))),o=n.initReconnect(setTimeout.bind(tr,Pr.bind(tr,r,1)));i=()=>{t&&t(),o&&o(),Qn.delete(e)}}};return l(),[e,o,l,i]}return[e,Qn.get(e)[4]]},[Cr,Rr]=Ar(new Map),Ir=ir({onLoadingSlow:er,onSuccess:er,onError:er,onErrorRetry:(e,t,n,r,o)=>{const i=n.errorRetryCount,u=o.retryCount,a=~~((Math.random()+.5)*(1<<(u<8?u:8)))*n.errorRetryInterval;!rr(i)&&u>i||setTimeout(r,a,o)},onDiscarded:er,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Or?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:Or?5e3:3e3,compare:(e,t)=>dr(e)==dr(t),isPaused:()=>!1,cache:Cr,mutate:Rr,fallback:{}},vr),Tr=(e,t)=>{const n=ir(e,t);if(t){const{use:r,fallback:o}=e,{use:i,fallback:u}=t;r&&i&&(n.use=r.concat(i)),o&&u&&(n.fallback=ir(o,u))}return n},Mr=(0,e.createContext)({}),kr=ar&&window.__SWR_DEVTOOLS_USE__,Dr=kr?window.__SWR_DEVTOOLS_USE__:[],Ur=Dr.concat((e=>(t,n,r)=>e(t,n&&((...e)=>{const r=jr(t)[0],[,,,o]=Qn.get(Cr),i=o[r];return i?(delete o[r],i):n(...e)}),r)));kr&&(window.__SWR_DEVTOOLS_REACT__=e.default);const Lr={dedupe:!0};nr.defineProperty((t=>{const{value:n}=t,r=(0,e.useContext)(Mr),o=or(n),i=(0,e.useMemo)((()=>o?n(r):n),[o,r,n]),u=(0,e.useMemo)((()=>o?i:Tr(r,i)),[o,r,i]),a=i&&i.provider,[c]=(0,e.useState)((()=>a?Ar(a(u.cache||Cr),i):tr));return c&&(u.cache=c[0],u.mutate=c[1]),Sr((()=>{if(c)return c[2]&&c[2](),c[3]}),[]),(0,e.createElement)(Mr.Provider,ir(t,{value:u}))}),"defaultValue",{value:Ir});var Nr,Br=(Nr=(t,n,r)=>{const{cache:o,compare:i,suspense:u,fallbackData:a,revalidateOnMount:c,refreshInterval:l,refreshWhenHidden:s,refreshWhenOffline:f,keepPreviousData:d}=r,[p,y,m]=Qn.get(o),[v,b]=jr(t),h=(0,e.useRef)(!1),g=(0,e.useRef)(!1),S=(0,e.useRef)(v),w=(0,e.useRef)(n),O=(0,e.useRef)(r),j=()=>O.current,E=()=>j().isVisible()&&j().isOnline(),[x,_,P]=lr(o,v),A=(0,e.useRef)({}).current,C=rr(a)?r.fallback[v]:a,R=(e,t)=>{let n=!0;for(const r in A){const o=r;i(t[o],e[o])||"data"===o&&rr(e[o])&&i(t[o],N)||(n=!1)}return n},I=(0,e.useMemo)((()=>{const e=!!v&&!!n&&(rr(c)?!j().isPaused()&&!u:c),t=()=>{const t=x(),n=ir(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n};let r=t();return()=>{const e=t();return R(e,r)?r:r=e}}),[o,v]),T=(0,Zn.useSyncExternalStore)((0,e.useCallback)((e=>P(v,((t,n)=>{R(t,n)||e()}))),[o,v]),I,I),M=!h.current,k=T.data,D=rr(k)?C:k,U=T.error,L=(0,e.useRef)(D),N=d?rr(k)?L.current:k:D,B=M&&!rr(c)?c:!j().isPaused()&&(u?!rr(D)&&r.revalidateIfStale:rr(D)||r.revalidateIfStale),F=!!(v&&n&&M&&B),V=rr(T.isValidating)?F:T.isValidating,z=rr(T.isLoading)?F:T.isLoading,$=(0,e.useCallback)((async e=>{const t=w.current;if(!v||!t||g.current||j().isPaused())return!1;let n,o,u=!0;const a=e||{},c=!m[v]||!a.dedupe,l=()=>hr?!g.current&&v===S.current&&h.current:v===S.current,s={isValidating:!1,isLoading:!1},f=()=>{_(s)},d=()=>{const e=m[v];e&&e[1]===o&&delete m[v]},p={isValidating:!0};rr(x().data)&&(p.isLoading=!0);try{if(c&&(_(p),r.loadingTimeout&&rr(x().data)&&setTimeout((()=>{u&&l()&&j().onLoadingSlow(v,r)}),r.loadingTimeout),m[v]=[t(b),xr()]),[n,o]=m[v],n=await n,c&&setTimeout(d,r.dedupingInterval),!m[v]||m[v][1]!==o)return c&&l()&&j().onDiscarded(v),!1;s.error=tr;const e=y[v];if(!rr(e)&&(o<=e[0]||o<=e[1]||0===e[1]))return f(),c&&l()&&j().onDiscarded(v),!1;const a=x().data;s.data=i(a,n)?a:n,c&&l()&&j().onSuccess(n,v,r)}catch(e){d();const t=j(),{shouldRetryOnError:n}=t;t.isPaused()||(s.error=e,c&&l()&&(t.onError(e,v,t),(!0===n||or(n)&&n(e))&&E()&&t.onErrorRetry(e,v,t,$,{retryCount:(a.retryCount||0)+1,dedupe:!0})))}return u=!1,f(),!0}),[v,o]),W=(0,e.useCallback)(((...e)=>_r(o,S.current,...e)),[]);if(Sr((()=>{w.current=n,O.current=r,rr(k)||(L.current=k)})),Sr((()=>{if(!v)return;const e=$.bind(tr,Lr);let t=0;const n=((e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}})(v,p,(n=>{if(0==n){const n=Date.now();j().revalidateOnFocus&&n>t&&E()&&(t=n+j().focusThrottleInterval,e())}else if(1==n)j().revalidateOnReconnect&&E()&&e();else if(2==n)return $()}));return g.current=!1,S.current=v,h.current=!0,_({_k:b}),B&&(rr(D)||gr?e():(e=>{ar&&typeof window.requestAnimationFrame!=ur?window.requestAnimationFrame(e):setTimeout(e,1)})(e)),()=>{g.current=!0,n()}}),[v]),Sr((()=>{let e;function t(){const t=or(l)?l(D):l;t&&-1!==e&&(e=setTimeout(n,t))}function n(){x().error||!s&&!j().isVisible()||!f&&!j().isOnline()?t():$(Lr).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[l,s,f,v]),(0,e.useDebugValue)(N),u&&rr(D)&&v){if(!hr&&gr)throw new Error("Fallback data is required when using suspense in SSR.");throw w.current=n,O.current=r,g.current=!1,rr(U)?$(Lr):U}return{mutate:W,get data(){return A.data=!0,N},get error(){return A.error=!0,U},get isValidating(){return A.isValidating=!0,V},get isLoading(){return A.isLoading=!0,z}}},function(...t){const n=ir(Ir,(0,e.useContext)(Mr)),[r,o,i]=(e=>or(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}])(t),u=Tr(n,i);let a=Nr;const{use:c}=u,l=(c||[]).concat(Ur);for(let e=l.length;e--;)a=l[e](a);return a(r,o||u.fetcher||null,u)}),Fr=f(688),Vr=f(332),zr=f.n(Vr);function $r(t){var n,r=Br(t?"/ws/rest/v1/visit?patient=".concat(t,"&v=").concat(bn.defaultVisitCustomRepresentation,"&includeInactive=false"):null,bn.openmrsFetch),o=r.data,i=r.error;return{error:i,mutate:r.mutate,isValidating:r.isValidating,currentVisit:(0,e.useMemo)((function(){return null!==(n=null==o?void 0:o.data.results.find((function(e){return null===e.stopDatetime})))&&void 0!==n?n:null}),[null==o?void 0:o.data.results]),isLoading:!o&&!i}}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gr(){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)([]),2),n=t[0],r=t[1];return(0,e.useEffect)((function(){var e=(0,bn.getVisitTypes)().subscribe((function(e){r(e)}),(function(e){return console.error(e)}));return function(){return e.unsubscribe()}}),[]),n}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Fr.default.extend(zr());var Hr=10;function Yr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hr,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,e.useState)(1),2),o=r[0],i=r[1],u=(0,e.useMemo)((function(){return"number"==typeof n&&n>0?Math.max(1,Math.ceil(t.length/n)):1}),[t.length,n]);return{results:(0,e.useMemo)((function(){var e=(o-1)*n,r=(o+0)*n;return t.slice(e,r)}),[t,o,n]),totalPages:u,currentPage:o,paginated:t.length>n,showNextButton:o<u,showPreviousButton:o>1,goTo:function(e){i(Math.max(1,Math.min(u,e)))},goToNext:function(){o<u&&i(o+1)},goToPrevious:function(){o>1&&i(o-1)}}}})(),d})())}}}));
//# sourceMappingURL=openmrs-esm-react-utils.js.map