(self.webpackChunk_openmrs_esm_app_shell=self.webpackChunk_openmrs_esm_app_shell||[]).push([[527],{6254:(e,n,t)=>{"use strict";t.r(n),t.d(n,{run:()=>V});var r=t(1023),o=t(7034),i=t(8734),a={bootstrap:function(){return Promise.resolve()},mount:function(){return Promise.resolve()},unmount:function(){return Promise.resolve()}};function c(e,n,t,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){c(i,r,o,a,u,"next",e)}function u(e){c(i,r,o,a,u,"throw",e)}a(void 0)}))}}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l=[];function f(e){if(Array.isArray(e)){var n=e.map(f);return function(e){return n.some((function(n){return n(e)}))}}return"string"==typeof e?(0,r.pathToActiveWhen)(window.getOpenmrsSpaBase()+e):(t=e,(null!=(o=RegExp)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](t):t instanceof o)?function(n){return function(e,n){return e.test(n.pathname.replace(window.getOpenmrsSpaBase(),""))}(e,n)}:function(){return e});var t,o}var p="startupApp",d=new Map;function h(e,n){return u((function(){var t;return function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(r){switch(r.label){case 0:return[4,(0,i.importDynamic)(e)];case 1:return(t=r.sent())&&Object.hasOwn(t,n)&&"function"==typeof t[n]?e in d?[3,3]:[4,d[e]=new Promise((function(e,n){if(Object.hasOwn(t,p)){var r=t[p];if("function"==typeof r)return Promise.resolve(r()).then(e).catch(n)}e(null)}))]:[3,6];case 2:return r.sent(),[3,5];case 3:return[4,d[e]];case 4:r.sent(),r.label=5;case 5:return[2,Promise.resolve(t[n]())];case 6:t&&Object.hasOwn(t,n)?console.warn("The export ".concat(n," of the app ").concat(e," is not a function")):console.warn("The app ".concat(e," does not define a component called ").concat(n,", this cannot be loaded")),r.label=7;case 7:return[2,a]}}))}))}function m(e,n){if(e&&n&&"object"==typeof n){var t,r;(0,i.defineConfigSchema)(e,{});var o=null!==(r=n.extensions)&&void 0!==r?r:[];null===(t=n.pages)||void 0===t||t.forEach((function(n){var t,r,o;l.push((r=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){s(e,n,t[n])}))}return e}({},n),o=null!=(o={order:null!==(t=n.order)&&void 0!==t?t:Number.MAX_SAFE_INTEGER,appName:e})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})),r))})),o.forEach((function(n){b(e,n)}))}}function y(){l.sort((function(e,n){var t=e.order-n.order;return 0!=t?t:e.appName.localeCompare(n.appName,"en")}));var e=new Map,n=!0,t=!1,r=void 0;try{for(var o,i=l[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var a=o.value;e.has(a.appName)?e.set(a.appName,e.get(a.appName)+1):e.set(a.appName,0);var c=e.get(a.appName),u="".concat(a.appName,"-page-").concat(c),s=document.createElement("div");s.id="single-spa-application:".concat(u),document.body.appendChild(s),v(u,a)}}catch(e){t=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw r}}}function v(e,n){var t=void 0!==n.route?n.route:void 0!==n.routeRegex&&new RegExp(n.routeRegex);if(!1!==t)if(n.component){var o=function(e,n){var t=n.online,r=n.offline;return function(n){return!!(navigator.onLine&&(null==t||t)||!navigator.onLine&&null!=r&&r)&&e(n)}}(f(t),n),i=h(n.appName,n.component);(0,r.registerApplication)(e,i,o)}else console.warn('A registered page definition is missing a component and thus cannot be registered.\nTo fix this, ensure that you define the "component" field inside the page definition.',e);else console.warn('A registered page definition is missing a route and thus cannot be registered.\nTo fix this, ensure that you define the "route" (or alternatively the "routeRegex") field inside the extension definition.',e)}function b(e,n){var t=n.name;if(t){n.slots&&n.slot&&console.warn("The extension ".concat(t," from ").concat(e," declares both a 'slots' property and \na 'slot' property. Only the 'slots' property will be honored."));var r=n.slots?n.slots:n.slot?[n.slot]:[];if(n.component||n.load){var o;if(n.component)o=h(e,n.component);else if(n.load){if("function"!=typeof n.load)return void console.error("The extension ".concat(t," from ").concat(e," declares a 'load' property that is not a function. This is not\nsupported, so the extension will not be loaded."));o=n.load}(0,i.registerExtension)({name:t,load:o,meta:n.meta||{},order:n.order,moduleName:e,privileges:n.privileges});var a=!0,c=!1,u=void 0;try{for(var s,l=r[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var f=s.value;(0,i.attach)(f,t)}}catch(e){c=!0,u=e}finally{try{a||null==l.return||l.return()}finally{if(c)throw u}}}else console.error("The extension ".concat(t," from ").concat(e," is missing a 'component' entry and thus cannot be registered.\nTo fix this, ensure that you define a 'component' field inside the extension definition."),n)}else console.error("An extension definition in ".concat(e,' is missing an name and thus cannot be\nregistered. To fix this, ensure that you define the "name" field inside the\nextension definition.'),n)}var g=t(8658),w=t.n(g),S=t(3841),O=t.n(S),x=t(4259),j=t(8433),P=t(766);function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function T(e,n,t){if("function"!=typeof e.importTranslation)throw Error("Module ".concat(n," does not export an importTranslation function"));var r,o,i=e.importTranslation("./".concat(t,".json"));if(r=i,!(null!=(o=Promise)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](r):r instanceof o))throw Error("Module ".concat(n," exports an importTranslation function that does not return a promise. Did you forget to set require.context mode to 'lazy'?"));return i}var k="@openmrs/esm-app-shell";function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function E(e,n,t,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,o)}function N(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){E(i,r,o,a,c,"next",e)}function c(e){E(i,r,o,a,c,"throw",e)}a(void 0)}))}}function M(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==t.return||t.return()}finally{if(c)throw o}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var L=Symbol("openmrs_registration_promises");function _(){return _=N((function(){var e,n,t,r,i,a;return D(this,(function(c){switch(c.label){case 0:for(e=document.querySelectorAll("script[type='openmrs-routes']"),n=[],t=0;t<e.length;t++)n.push(function(){var e=N((function(e){var n,t,r;return D(this,(function(i){switch(i.label){case 0:n=void 0,i.label=1;case 1:return i.trys.push([1,5,,6]),e.textContent?(n=JSON.parse(e.textContent),[3,4]):[3,2];case 2:return e.src?[4,(0,o.openmrsFetch)(e.src)]:[3,4];case 3:n=i.sent().data,i.label=4;case 4:return[3,6];case 5:return t=i.sent(),console.error("Caught error while loading routes from ".concat(null!==(r=e.src)&&void 0!==r?r:"JSON script tag content"),t),[2,{}];case 6:return[2,Promise.resolve(null!=n?n:{})]}}))}));return function(n){return e.apply(this,arguments)}}()(e.item(t)));return[4,Promise.all(n)];case 1:return r=c.sent().reduce((function(e,n){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){M(e,n,t[n])}))}return e}({},e,n)}),{}),i=[],a=Object.entries(r).map((u=N((function(e){var n,t,r;return D(this,(function(o){return n=I(e,2),t=n[0],r=n[1],i.push([t,r]),m(t,r),[2]}))})),function(e){return u.apply(this,arguments)})),window[L]=Promise.all(a),window.installedModules=i,[2]}var u}))})),_.apply(this,arguments)}function q(e){return R.apply(this,arguments)}function R(){return(R=N((function(e){var n,t,r,i,a,c;return D(this,(function(u){n=!0,t=!1,r=void 0;try{for(i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)c=a.value,(0,o.provide)(c.value,c.name)}catch(e){t=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw r}}return[2]}))}))).apply(this,arguments)}function F(){var e=navigator.onLine;(0,r.triggerAppChange)(),(0,o.dispatchConnectivityChanged)(e),(0,o.showToast)({critical:!0,description:"Connection: ".concat(e?"online":"offline"),title:"App",kind:e?"success":"warning"})}function W(){return window.addEventListener("offline",F),window.addEventListener("online",F),(window.i18next=w()||g,new MutationObserver((function(){window.i18next.changeLanguage(void 0).catch((function(e){return console.error("i18next failed to re-detect language",e)}))})).observe(document.documentElement,{attributeFilter:["lang"],attributes:!0}),window.i18next.on("languageChanged",(function(){document.documentElement.setAttribute("dir",window.i18next.dir())})),window.i18next.use(x.Z).use({type:"backend",init:function(){},read:function(e,n,t){"translation"===n?t(Error("can't handle translation namespace"),null):void 0===n||void 0===e?t(Error(),null):(0,o.importDynamic)(n).then((function(t){return Promise.all([T(t,n,e),(0,o.getConfigInternal)(n)])})).then((function(n){var r,o,i=(o=2,function(e){if(Array.isArray(e))return e}(r=n)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==t.return||t.return()}finally{if(c)throw o}}return i}}(r,o)||function(e,n){if(e){if("string"==typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,n):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1],u=null!=a?a:{};if(c&&"Translation overrides"in c){var s=c["Translation overrides"];e in s&&(u=(0,P.Z)(u,s[e]))}t(null,u)})).catch((function(e){t(e,null)}))}}).use(j.initReactI18next).use(O()).init({detection:{order:["querystring","htmlTag","localStorage","navigator"],lookupQuerystring:"lang"},fallbackLng:"en"})).catch((function(e){return console.error("Failed to initialize translations",e)})).then((function(){return(0,r.start)()}))}function B(){return U.apply(this,arguments)}function U(){return U=N((function(){var e,n;return D(this,(function(t){switch(t.label){case 0:return[4,Promise.all([window[L],(0,o.getCurrentImportMap)()])];case 1:return e=I.apply(void 0,[t.sent(),2]),n=e[1],window.installedModules.map(function(){var e=N((function(e){var t,r;return D(this,(function(i){return t=I(e,1),r=t[0],(0,o.importDynamic)(r,void 0,{importMap:n}),[2]}))}));return function(n){return e.apply(this,arguments)}}()),[2]}}))})),U.apply(this,arguments)}function G(e){console.error(e),function(e){var n=document.querySelector("#app-error");if(n){var t=n.content.cloneNode(!0),r=t.querySelector('[data-var="message"]');if(r&&(r.textContent=(null==e?void 0:e.message)||"No additional information available."),localStorage.getItem("openmrs:devtools")&&Object.keys(localStorage).some((function(e){return e.startsWith("import-map-override:")}))){var o=null==t?void 0:t.querySelector("#buttons");if(o){var i=document.createElement("button");i.className="cds--btn",i.innerHTML="Clear dev overrides",i.onclick=z,o.appendChild(i)}}document.body.appendChild(t)}}(e)}function z(){var e=!0,n=!1,t=void 0;try{for(var r,o=Object.keys(localStorage)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;i.startsWith("import-map-override:")&&!["import-map-override:react","import-map-override:react-dom"].includes(i)&&localStorage.removeItem(i)}}catch(e){n=!0,t=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw t}}location.reload()}function J(){return Z.apply(this,arguments)}function Z(){return(Z=N((function(){var e;return D(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,(0,o.registerOmrsServiceWorker)("".concat(window.getOpenmrsSpaBase(),"service-worker.js"))];case 1:return n.sent(),[4,(0,o.activateOfflineCapability)()];case 2:return n.sent(),3e5,t=null,r=function(e,n){var r=!t||(new Date).getTime()-t.getTime()>3e5;n&&e&&r&&(t=new Date,(0,o.dispatchPrecacheStaticDependencies)())},i=!1,a=!1,(0,o.getCurrentUser)({includeAuthStatus:!1}).subscribe((function(e){r(i,a=!!e)})),(0,o.subscribeConnectivity)((function(e){var n=e.online;i=n,r(n,a)})),[3,4];case 3:return e=n.sent(),console.error("Error while setting up offline mode.",e),(0,o.showNotification)({kind:"error",title:"Offline Setup Error",description:e.message}),[3,4];case 4:return[2]}var t,r,i,a}))}))).apply(this,arguments)}function $(){return H.apply(this,arguments)}function H(){return(H=N((function(){var e;return D(this,(function(n){switch(n.label){case 0:return[4,Q()];case 1:return n.sent(),e=new URL("".concat(window.openmrsBase,"/ws/rest/v1/session"),window.location.origin).href,[4,(0,o.messageOmrsServiceWorker)({type:"registerDynamicRoute",url:e,strategy:"network-first"})];case 2:return n.sent(),[4,(0,o.openmrsFetch)("/ws/rest/v1/session").catch((function(e){return console.warn("Failed to precache the user session data from the app shell. MFs depending on this data may run into problems while offline.",e)}))];case 3:return n.sent(),[2]}}))}))).apply(this,arguments)}function Q(){return X.apply(this,arguments)}function X(){return(X=N((function(){var e;return D(this,(function(n){switch(n.label){case 0:return[4,window.importMapOverrides.getCurrentPageMap()];case 1:return e=n.sent(),[4,(0,o.messageOmrsServiceWorker)({type:"onImportMapChanged",importMap:e})];case 2:return n.sent(),[2]}}))}))).apply(this,arguments)}function K(){(0,o.subscribeConnectivity)((function(e){var n=e.online,t=document.querySelector("body");n?t.classList.remove("omrs-offline"):t.classList.add("omrs-offline")}))}function V(e,n){var r=(0,o.renderLoadingSpinner)(document.body),a=function(e){var n=Promise.all(e.map((function(e){var n=(0,o.interpolateUrl)(e);return fetch(n).then((function(e){return e.json()})).then((function(n){return{name:e,value:n}})).catch((function(n){return console.error('Loading the config from "'.concat(e,'" failed.'),n),{name:e,value:{}}}))})));return function(){return n.then(q)}}(e);return(0,o.integrateBreakpoints)(),(0,o.renderToasts)(document.querySelector(".omrs-toasts-container")),(0,o.renderModals)(document.querySelector(".omrs-modals-container")),(0,o.renderInlineNotifications)(document.querySelector(".omrs-inline-notifications-container")),(0,o.renderActionableNotifications)(document.querySelector(".omrs-actionable-notifications-container")),(0,o.createAppState)({}),(0,o.subscribeNotificationShown)(o.showNotification),(0,o.subscribeActionableNotificationShown)(o.showActionableNotification),(0,o.subscribeToastShown)(o.showToast),(0,o.subscribePrecacheStaticDependencies)($),(0,o.setupApiModule)(),function(){var e,n=(e={featureName:"app-shell",moduleName:k},[{name:"breadcrumbs-widget",slot:"breadcrumbs-slot",load:(0,i.getAsyncLifecycle)((function(){return t.e(954).then(t.bind(t,1954))}),e),online:!0,offline:!0}]),r=!0,o=!1,a=void 0;try{for(var c,u=n[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var s=c.value;b(k,s)}}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}(),function(){return _.apply(this,arguments)}().then(y).then(K).then(a).then(W).catch(G).then(r).then(n?J:void 0).then(B)}},7603:()=>{}}]);