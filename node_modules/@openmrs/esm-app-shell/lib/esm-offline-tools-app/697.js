/*! For license information please see 697.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_openmrs_esm_offline_tools_app=globalThis.webpackChunk_openmrs_esm_offline_tools_app||[]).push([[697],{2173:(t,e,n)=>{var r=n(5776),o="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},i=r.useState,a=r.useEffect,s=r.useLayoutEffect,c=r.useDebugValue;function u(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!o(t,n)}catch(t){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=i({inst:{value:n,getSnapshot:e}}),o=r[0].inst,l=r[1];return s((function(){o.value=n,o.getSnapshot=e,u(o)&&l({inst:o})}),[t,n,e]),a((function(){return u(o)&&l({inst:o}),t((function(){u(o)&&l({inst:o})}))}),[t]),c(n),n};e.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},1374:(t,e,n)=>{t.exports=n(2173)},7487:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(8670);const o=function(t,e){for(var n=t.length;n--;)if((0,r.Z)(t[n][0],e))return n;return-1};var i=Array.prototype.splice;function a(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a.prototype.clear=function(){this.__data__=[],this.size=0},a.prototype.delete=function(t){var e=this.__data__,n=o(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))},a.prototype.get=function(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]},a.prototype.has=function(t){return o(this.__data__,t)>-1},a.prototype.set=function(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const s=a},6763:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(948),o=n(658);const i=(0,r.Z)(o.Z,"Map")},6776:(t,e,n)=>{n.d(e,{Z:()=>f});const r=(0,n(948).Z)(Object,"create");var o=Object.prototype.hasOwnProperty;var i=Object.prototype.hasOwnProperty;function a(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a.prototype.clear=function(){this.__data__=r?r(null):{},this.size=0},a.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},a.prototype.get=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0},a.prototype.has=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)},a.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this};const s=a;var c=n(7487),u=n(6763);const l=function(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map};function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}d.prototype.clear=function(){this.size=0,this.__data__={hash:new s,map:new(u.Z||c.Z),string:new s}},d.prototype.delete=function(t){var e=l(this,t).delete(t);return this.size-=e?1:0,e},d.prototype.get=function(t){return l(this,t).get(t)},d.prototype.has=function(t){return l(this,t).has(t)},d.prototype.set=function(t,e){var n=l(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const f=d},7851:(t,e,n)=>{n.d(e,{Z:()=>r});const r=n(658).Z.Symbol},1258:(t,e,n)=>{n.d(e,{Z:()=>l});var r=n(7851),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r.Z?r.Z.toStringTag:void 0;var c=Object.prototype.toString;var u=r.Z?r.Z.toStringTag:void 0;const l=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":u&&u in Object(t)?function(t){var e=i.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[s]=n:delete t[s]),o}(t):function(t){return c.call(t)}(t)}},5852:(t,e,n)=>{n.d(e,{Z:()=>r});const r="object"==typeof global&&global&&global.Object===Object&&global},948:(t,e,n)=>{n.d(e,{Z:()=>v});var r=n(3200);const o=n(658).Z["__core-js_shared__"];var i,a=(i=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";var s=n(7275),c=Function.prototype.toString;var u=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,f=l.toString,h=d.hasOwnProperty,p=RegExp("^"+f.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const _=function(t){return!(!(0,s.Z)(t)||(e=t,a&&a in e))&&((0,r.Z)(t)?p:u).test(function(t){if(null!=t){try{return c.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e},v=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return _(n)?n:void 0}},658:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(5852),o="object"==typeof self&&self&&self.Object===Object&&self;const i=r.Z||o||Function("return this")()},8670:(t,e,n)=>{n.d(e,{Z:()=>r});const r=function(t,e){return t===e||t!=t&&e!=e}},3200:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(1258),o=n(7275);const i=function(t){if(!(0,o.Z)(t))return!1;var e=(0,r.Z)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},7275:(t,e,n)=>{n.d(e,{Z:()=>r});const r=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},4572:(t,e,n)=>{n.d(e,{ZP:()=>J});var r=n(5776),o=n(1374);const i=new WeakMap,a={},s=()=>{},c=s(),u=Object,l=t=>t===c,d=t=>"function"==typeof t,f=(t,e)=>({...t,...e}),h="undefined",p=typeof window!=h,_=typeof document!=h,v=(t,e)=>{const n=i.get(t);return[()=>t.get(e)||a,r=>{const o=t.get(e);n[5](e,f(o,r),o||a)},n[6]]},y=new WeakMap;let g=0;const b=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let o,i;if(u(t)!==t||r||n==RegExp)o=r?t.toJSON():"symbol"==e?t.toString():"string"==e?JSON.stringify(t):""+t;else{if(o=y.get(t),o)return o;if(o=++g+"~",y.set(t,o),n==Array){for(o="@",i=0;i<t.length;i++)o+=b(t[i])+",";y.set(t,o)}if(n==u){o="#";const e=u.keys(t).sort();for(;!l(i=e.pop());)l(t[i])||(o+=i+":"+b(t[i])+",");y.set(t,o)}}return o};let w=!0;const[m,O]=p&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[s,s],S={isOnline:()=>w,isVisible:()=>{const t=_&&document.visibilityState;return l(t)||"hidden"!==t}},E={initFocus:t=>(_&&document.addEventListener("visibilitychange",t),m("focus",t),()=>{_&&document.removeEventListener("visibilitychange",t),O("focus",t)}),initReconnect:t=>{const e=()=>{w=!0,t()},n=()=>{w=!1};return m("online",e),m("offline",n),()=>{O("online",e),O("offline",n)}}},Z=!r.useId,R=!p||"Deno"in window,j=R?r.useEffect:r.useLayoutEffect,k="undefined"!=typeof navigator&&navigator.connection,T=!R&&k&&(["slow-2g","2g"].includes(k.effectiveType)||k.saveData),L=t=>{if(d(t))try{t=t()}catch(e){t=""}const e=t;return[t="string"==typeof t?t:(Array.isArray(t)?t.length:t)?b(t):"",e]};let P=0;const x=()=>++P;async function C(...t){const[e,n,r,o]=t,a=f({populateCache:!0,throwOnError:!0},"boolean"==typeof o?{revalidate:o}:o||{});let s=a.populateCache;const u=a.rollbackOnError;let h=a.optimisticData;const p=!1!==a.revalidate,_=a.throwOnError;if(d(n)){const t=n,r=[],o=e.keys();for(let n=o.next();!n.done;n=o.next()){const o=n.value;!o.startsWith("$inf$")&&t(e.get(o)._k)&&r.push(o)}return Promise.all(r.map(y))}return y(n);async function y(n){const[o]=L(n);if(!o)return;const[a,f]=v(e,o),[y,g,b]=i.get(e),w=y[o],m=()=>p&&(delete b[o],w&&w[0])?w[0](2).then((()=>a().data)):a().data;if(t.length<3)return m();let O,S=r;const E=x();g[o]=[E,0];const Z=!l(h),R=a(),j=R.data,k=R._c,T=l(k)?j:k;if(Z&&(h=d(h)?h(T):h,f({data:h,_c:T})),d(S))try{S=S(T)}catch(t){O=t}if(S&&d(S.then)){if(S=await S.catch((t=>{O=t})),E!==g[o][0]){if(O)throw O;return S}O&&Z&&(t=>"function"==typeof u?u(t):!1!==u)(O)&&(s=!0,S=T,f({data:S,_c:c}))}s&&(O||(d(s)&&(S=s(S,T)),f({data:S,_c:c}))),g[o][1]=x();const P=await m();if(f({_c:c}),!O)return s?P:S;if(_)throw O}}const V=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},D=(t,e)=>{if(!i.has(t)){const n=f(E,e),r={},o=C.bind(c,t);let a=s;const u={},l=(t,e)=>{const n=u[t]||[];return u[t]=n,n.push(e),()=>n.splice(n.indexOf(e),1)},d=(e,n,r)=>{t.set(e,n);const o=u[e];if(o)for(let t=o.length;t--;)o[t](r,n)},h=()=>{if(!i.has(t)&&(i.set(t,[r,{},{},{},o,d,l]),!R)){const e=n.initFocus(setTimeout.bind(c,V.bind(c,r,0))),o=n.initReconnect(setTimeout.bind(c,V.bind(c,r,1)));a=()=>{e&&e(),o&&o(),i.delete(t)}}};return h(),[t,o,h,a]}return[t,i.get(t)[4]]},[F,I]=D(new Map),z=f({onLoadingSlow:s,onSuccess:s,onError:s,onErrorRetry:(t,e,n,r,o)=>{const i=n.errorRetryCount,a=o.retryCount,s=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;!l(i)&&a>i||setTimeout(r,s,o)},onDiscarded:s,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:T?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:T?5e3:3e3,compare:(t,e)=>b(t)==b(e),isPaused:()=>!1,cache:F,mutate:I,fallback:{}},S),M=(t,e)=>{const n=f(t,e);if(e){const{use:r,fallback:o}=t,{use:i,fallback:a}=e;r&&i&&(n.use=r.concat(i)),o&&a&&(n.fallback=f(o,a))}return n},A=(0,r.createContext)({}),W=p&&window.__SWR_DEVTOOLS_USE__,$=W?window.__SWR_DEVTOOLS_USE__:[],q=$.concat((t=>(e,n,r)=>t(e,n&&((...t)=>{const r=L(e)[0],[,,,o]=i.get(F),a=o[r];return a?(delete o[r],a):n(...t)}),r)));W&&(window.__SWR_DEVTOOLS_REACT__=r);const N={dedupe:!0};u.defineProperty((t=>{const{value:e}=t,n=(0,r.useContext)(A),o=d(e),i=(0,r.useMemo)((()=>o?e(n):e),[o,n,e]),a=(0,r.useMemo)((()=>o?i:M(n,i)),[o,n,i]),s=i&&i.provider,[u]=(0,r.useState)((()=>s?D(s(a.cache||F),i):c));return u&&(a.cache=u[0],a.mutate=u[1]),j((()=>{if(u)return u[2]&&u[2](),u[3]}),[]),(0,r.createElement)(A.Provider,f(t,{value:a}))}),"defaultValue",{value:z});var U,J=(U=(t,e,n)=>{const{cache:a,compare:s,suspense:u,fallbackData:_,revalidateOnMount:y,refreshInterval:g,refreshWhenHidden:b,refreshWhenOffline:w,keepPreviousData:m}=n,[O,S,E]=i.get(a),[k,T]=L(t),P=(0,r.useRef)(!1),V=(0,r.useRef)(!1),D=(0,r.useRef)(k),F=(0,r.useRef)(e),I=(0,r.useRef)(n),z=()=>I.current,M=()=>z().isVisible()&&z().isOnline(),[A,W,$]=v(a,k),q=(0,r.useRef)({}).current,U=l(_)?n.fallback[k]:_,J=(t,e)=>{let n=!0;for(const r in q){const o=r;s(e[o],t[o])||"data"===o&&l(t[o])&&s(e[o],tt)||(n=!1)}return n},G=(0,r.useMemo)((()=>{const t=!!k&&!!e&&(l(y)?!z().isPaused()&&!u:y),n=()=>{const e=A(),n=f(e);return delete n._k,t?{isValidating:!0,isLoading:!0,...n}:n};let r=n();return()=>{const t=n();return J(t,r)?r:r=t}}),[a,k]),H=(0,o.useSyncExternalStore)((0,r.useCallback)((t=>$(k,((e,n)=>{J(e,n)||t()}))),[a,k]),G,G),B=!P.current,K=H.data,Q=l(K)?U:K,X=H.error,Y=(0,r.useRef)(Q),tt=m?l(K)?Y.current:K:Q,et=B&&!l(y)?y:!z().isPaused()&&(u?!l(Q)&&n.revalidateIfStale:l(Q)||n.revalidateIfStale),nt=!!(k&&e&&B&&et),rt=l(H.isValidating)?nt:H.isValidating,ot=l(H.isLoading)?nt:H.isLoading,it=(0,r.useCallback)((async t=>{const e=F.current;if(!k||!e||V.current||z().isPaused())return!1;let r,o,i=!0;const a=t||{},u=!E[k]||!a.dedupe,f=()=>Z?!V.current&&k===D.current&&P.current:k===D.current,h={isValidating:!1,isLoading:!1},p=()=>{W(h)},_=()=>{const t=E[k];t&&t[1]===o&&delete E[k]},v={isValidating:!0};l(A().data)&&(v.isLoading=!0);try{if(u&&(W(v),n.loadingTimeout&&l(A().data)&&setTimeout((()=>{i&&f()&&z().onLoadingSlow(k,n)}),n.loadingTimeout),E[k]=[e(T),x()]),[r,o]=E[k],r=await r,u&&setTimeout(_,n.dedupingInterval),!E[k]||E[k][1]!==o)return u&&f()&&z().onDiscarded(k),!1;h.error=c;const t=S[k];if(!l(t)&&(o<=t[0]||o<=t[1]||0===t[1]))return p(),u&&f()&&z().onDiscarded(k),!1;const a=A().data;h.data=s(a,r)?a:r,u&&f()&&z().onSuccess(r,k,n)}catch(t){_();const e=z(),{shouldRetryOnError:n}=e;e.isPaused()||(h.error=t,u&&f()&&(e.onError(t,k,e),(!0===n||d(n)&&n(t))&&M()&&e.onErrorRetry(t,k,e,it,{retryCount:(a.retryCount||0)+1,dedupe:!0})))}return i=!1,p(),!0}),[k,a]),at=(0,r.useCallback)(((...t)=>C(a,D.current,...t)),[]);if(j((()=>{F.current=e,I.current=n,l(K)||(Y.current=K)})),j((()=>{if(!k)return;const t=it.bind(c,N);let e=0;const n=((t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const t=r.indexOf(n);t>=0&&(r[t]=r[r.length-1],r.pop())}})(k,O,(n=>{if(0==n){const n=Date.now();z().revalidateOnFocus&&n>e&&M()&&(e=n+z().focusThrottleInterval,t())}else if(1==n)z().revalidateOnReconnect&&M()&&t();else if(2==n)return it()}));return V.current=!1,D.current=k,P.current=!0,W({_k:T}),et&&(l(Q)||R?t():(r=t,p&&typeof window.requestAnimationFrame!=h?window.requestAnimationFrame(r):setTimeout(r,1))),()=>{V.current=!0,n()};var r}),[k]),j((()=>{let t;function e(){const e=d(g)?g(Q):g;e&&-1!==t&&(t=setTimeout(n,e))}function n(){A().error||!b&&!z().isVisible()||!w&&!z().isOnline()?e():it(N).then(e)}return e(),()=>{t&&(clearTimeout(t),t=-1)}}),[g,b,w,k]),(0,r.useDebugValue)(tt),u&&l(Q)&&k){if(!Z&&R)throw new Error("Fallback data is required when using suspense in SSR.");throw F.current=e,I.current=n,V.current=!1,l(X)?it(N):X}return{mutate:at,get data(){return q.data=!0,tt},get error(){return q.error=!0,X},get isValidating(){return q.isValidating=!0,rt},get isLoading(){return q.isLoading=!0,ot}}},function(...t){const e=f(z,(0,r.useContext)(A)),[n,o,i]=(t=>d(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(null===t[1]?t[2]:t[1])||{}])(t),a=M(e,i);let s=U;const{use:c}=a,u=(c||[]).concat(q);for(let t=u.length;t--;)s=u[t](s);return s(n,o||a.fetcher||null,a)})}}]);